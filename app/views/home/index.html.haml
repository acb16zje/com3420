- content_for :title, "Home"

%section.section
  .container.is-fluid
    = render :partial => 'layouts/flash'

    .columns.has-text-centered
      .column.is-half.is-offset-one-quarter
        = image_tag("amrc_main.svg", width: "1000")
    .columns
      .column.is-half.is-offset-one-quarter
        %br
        = form_tag items_path, enforce_utf8: false, method: :get do
          .field.has-addons
            .control.is-expanded
              %input.input{type:'text', name: 'category_name', placeholder: 'Search for an asset', autofocus: ''}
            .control
              %button.button.is-info{type:'submit'}
                Search

    %br
    - if @user_home_categories.any?
      - placeholder = 5 - (@user_home_categories.length % 5)
      - @user_home_categories.each_slice(5) do |slice|
        .columns
          - slice.each do |usercat|
            .column
              .card
                .card-content.hero.is-small.is-light
                  .columns.hero-body
                    .column.has-text-centered
                      - if usercat.category.icon?
                        %span.icon.is-large
                          = raw "#{usercat.category.icon}"
                      - else
                        %span.icon.is-large
                          %i.far.fa-question-circle.fa-6x
                %footer.card-footer
                  %p.card-footer-item
                    %span
                      View
                      = link_to items_path(category_name: usercat.category.name) do
                        = usercat.category.name
          .column
            .card
              .card-content.hero.is-small.is-light
                .columns.hero-body
                  .column.has-text-centered
                    %span.icon.is-large
                      %i.fas.fa-plus.fa-6x
              %footer.card-footer
                %p.card-footer-item
                  %span
                    = link_to 'Add Favourite', new_user_home_category_path, class:'button is-link is-block is-small'
          - for _ in 0...placeholder - 1
            .column
    - else
      .columns
        .column
          .card
            .card-content.hero.is-small.is-light
              .columns.hero-body
                .column.has-text-centered
                  %span.icon.is-large
                    %i.fas.fa-plus.fa-7x
            %footer.card-footer
              %p.card-footer-item
                %span
                  = link_to 'Add Favourite', new_user_home_category_path, class:'button is-link is-block is-small'
        - for _ in 0..3
          .column


